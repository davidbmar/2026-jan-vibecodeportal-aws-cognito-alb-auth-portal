{% extends "base.html" %}

{% block title %}SYSTEM CONFIGURATION - CAPSULE PORTAL{% endblock %}

{% block content %}
<div class="crt-container">
    <pre class="ascii-art">
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—
 â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘
 â•šâ•â•â•â•â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘
 â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•
    </pre>

    <div class="content-box">
        <h2>âš™ SYSTEM CONFIGURATION & ARCHITECTURE</h2>

        <!-- Current System Information -->
        <div class="info-section">
            <h3>ğŸ“Š CURRENT SYSTEM STATUS</h3>
            <table style="width: 100%; margin-top: 1rem; font-size: 0.9rem;">
                <tr>
                    <td style="padding: 0.5rem;"><strong>Instance ID:</strong></td>
                    <td style="padding: 0.5rem; font-family: 'Courier Prime', monospace;">{{ system_info.instance_id }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Instance Type:</strong></td>
                    <td style="padding: 0.5rem;">{{ system_info.instance_type }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Availability Zone:</strong></td>
                    <td style="padding: 0.5rem;">{{ system_info.availability_zone }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Private IP:</strong></td>
                    <td style="padding: 0.5rem; font-family: 'Courier Prime', monospace;">{{ system_info.private_ip }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Public IP:</strong></td>
                    <td style="padding: 0.5rem; font-family: 'Courier Prime', monospace;">{{ system_info.public_ip }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Hostname:</strong></td>
                    <td style="padding: 0.5rem; font-family: 'Courier Prime', monospace;">{{ system_info.hostname }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>User Pool ID:</strong></td>
                    <td style="padding: 0.5rem; font-family: 'Courier Prime', monospace; font-size: 0.75rem;">{{ system_info.user_pool_id }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>AWS Region:</strong></td>
                    <td style="padding: 0.5rem;">{{ system_info.aws_region }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>System Time:</strong></td>
                    <td style="padding: 0.5rem;">{{ system_info.current_time }}</td>
                </tr>
            </table>
        </div>

        <!-- Architecture Diagram -->
        <div class="info-section" style="margin-top: 2rem;">
            <h3>ğŸ—º INFRASTRUCTURE ARCHITECTURE MAP</h3>
            <pre style="font-family: 'Courier Prime', monospace; font-size: 0.7rem; line-height: 1.3; overflow-x: auto; background: rgba(0, 0, 0, 0.5); padding: 1.5rem; border: 1px solid rgba(0, 255, 0, 0.3);">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CAPSULE ACCESS PORTAL                                   â”‚
â”‚                         COGNITO + ALB + EC2 ARCHITECTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   Internet   â”‚
                                  â”‚   (Users)    â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ HTTPS
                                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         Route53 DNS                    â”‚
                    â”‚  portal.capsule-playground.com         â”‚
                    â”‚  â†’ ALB DNS Name (A Record Alias)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
                                     â–¼
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘              VPC: 10.0.0.0/16 (us-east-1)                     â•‘
        â•‘                                                                 â•‘
        â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
        â•‘  â”‚  Public Subnet 1: 10.0.1.0/24 (us-east-1a)            â”‚   â•‘
        â•‘  â”‚                                                         â”‚   â•‘
        â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â•‘
        â•‘  â”‚  â”‚   Application Load Balancer (ALB)            â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Security Group: Allow 80, 443            â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Listener: Port 443 (HTTPS)               â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Certificate: ACM (*.capsule-playground)  â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Auth: Cognito authenticate-cognito       â”‚     â”‚   â•‘
        â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â•‘
        â•‘  â”‚                 â”‚                                      â”‚   â•‘
        â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
        â•‘                    â”‚                                           â•‘
        â•‘                    â”‚ Forwards to Target Group                  â•‘
        â•‘                    â”‚ (Port 8000)                               â•‘
        â•‘                    â”‚                                           â•‘
        â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
        â•‘  â”‚  Public Subnet 1: 10.0.1.0/24                          â”‚   â•‘
        â•‘  â”‚                                                         â”‚   â•‘
        â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â•‘
        â•‘  â”‚  â”‚   EC2 Instance ({{ system_info.instance_id }})           â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Type: {{ system_info.instance_type }}                    â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Private IP: {{ system_info.private_ip }}             â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Public IP: {{ system_info.public_ip }}              â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ Security Group: Port 8000 (from ALB only)â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ FastAPI App on port 8000                 â”‚     â”‚   â•‘
        â•‘  â”‚  â”‚   â€¢ IAM Role: Cognito AdminListGroupsForUserâ”‚     â”‚   â•‘
        â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â•‘
        â•‘  â”‚                                                         â”‚   â•‘
        â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
        â•‘                                                                 â•‘
        â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
        â•‘  â”‚  Public Subnet 2: 10.0.2.0/24 (us-east-1b)            â”‚   â•‘
        â•‘  â”‚  (For ALB high availability)                           â”‚   â•‘
        â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
        â•‘                                                                 â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                                     â”‚
                                     â”‚ AWS API Calls
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     AWS Cognito User Pool           â”‚
                    â”‚  â€¢ Authentication                   â”‚
                    â”‚  â€¢ Groups: engineering, hr, etc     â”‚
                    â”‚  â€¢ MFA: TOTP enabled                â”‚
                    â”‚  â€¢ Region: {{ system_info.aws_region }}         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              DATA FLOW DIAGRAM                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: User â†’ portal.capsule-playground.com
        â”‚
        â”œâ”€ DNS resolves to ALB IP addresses
        â”‚
Step 2: ALB â†’ Check for auth cookie (AWSELBAuthSessionCookie)
        â”‚
        â”œâ”€ No cookie? Redirect to Cognito hosted UI
        â”‚
Step 3: User â†’ Logs in at Cognito (email + password + MFA)
        â”‚
        â”œâ”€ Cognito validates credentials
        â”‚
Step 4: Cognito â†’ Redirects back to ALB with auth code
        â”‚
        â”œâ”€ ALB validates code with Cognito
        â”‚
Step 5: ALB â†’ Sets session cookies
        â”‚    â†’ Adds x-amzn-oidc-data JWT header
        â”‚    â†’ Forwards request to EC2:8000
        â”‚
Step 6: FastAPI App â†’ Extracts email from JWT header
        â”‚             â†’ Queries Cognito for user groups (cached 60s)
        â”‚             â†’ Checks authorization for route
        â”‚             â†’ Returns page or redirect to /denied
        â”‚
Step 7: Response â†’ ALB â†’ User browser


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SECURITY MODEL                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NETWORK LAYER                          â”‚
â”‚  â€¢ EC2 not directly accessible         â”‚
â”‚  â€¢ Security groups: ALB â†’ EC2 only     â”‚
â”‚  â€¢ No public SSH access configured     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTHENTICATION (ALB)                   â”‚
â”‚  â€¢ Cognito OAuth2 code flow            â”‚
â”‚  â€¢ Session managed by ALB              â”‚
â”‚  â€¢ JWT in x-amzn-oidc-data header      â”‚
â”‚  â€¢ Certificate: ACM (auto-renewal)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTHORIZATION (Application)            â”‚
â”‚  â€¢ Group-based access control          â”‚
â”‚  â€¢ Deny by default                     â”‚
â”‚  â€¢ Per-user Cognito queries            â”‚
â”‚  â€¢ Minimal IAM permissions             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </pre>
        </div>

        <!-- Infrastructure Components -->
        <div class="info-section" style="margin-top: 2rem;">
            <h3>ğŸ— INFRASTRUCTURE COMPONENTS</h3>
            <table style="width: 100%; margin-top: 1rem;">
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Purpose</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Route53</td>
                        <td>DNS management</td>
                        <td><span style="color: #00ff00;">â— Active</span></td>
                    </tr>
                    <tr>
                        <td>ACM Certificate</td>
                        <td>SSL/TLS termination</td>
                        <td><span style="color: #00ff00;">â— Valid</span></td>
                    </tr>
                    <tr>
                        <td>Application Load Balancer</td>
                        <td>Traffic distribution & authentication</td>
                        <td><span style="color: #00ff00;">â— Running</span></td>
                    </tr>
                    <tr>
                        <td>Target Group</td>
                        <td>Health checks & routing</td>
                        <td><span style="color: #00ff00;">â— Healthy</span></td>
                    </tr>
                    <tr>
                        <td>EC2 Instance</td>
                        <td>FastAPI application server</td>
                        <td><span style="color: #00ff00;">â— Running</span></td>
                    </tr>
                    <tr>
                        <td>Cognito User Pool</td>
                        <td>User authentication & management</td>
                        <td><span style="color: #00ff00;">â— Active</span></td>
                    </tr>
                    <tr>
                        <td>VPC</td>
                        <td>Network isolation</td>
                        <td><span style="color: #00ff00;">â— Active</span></td>
                    </tr>
                    <tr>
                        <td>Security Groups</td>
                        <td>Firewall rules</td>
                        <td><span style="color: #00ff00;">â— Enforced</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Key Features -->
        <div class="info-section" style="margin-top: 2rem;">
            <h3>âœ¨ KEY FEATURES</h3>
            <ul style="margin-left: 2rem; margin-top: 1rem;">
                <li>âœ“ Instance ID-based targeting (resilient to IP changes)</li>
                <li>âœ“ ALB handles authentication (OAuth2 code flow)</li>
                <li>âœ“ Application handles authorization (group-based)</li>
                <li>âœ“ MFA enabled (TOTP via authenticator apps)</li>
                <li>âœ“ Session caching (60s TTL for performance)</li>
                <li>âœ“ Health checks (bypass auth for monitoring)</li>
                <li>âœ“ HTTPS with auto-renewing ACM certificate</li>
                <li>âœ“ High availability across 2 AZs</li>
            </ul>
        </div>

        <!-- Cost Estimate -->
        <div class="info-section" style="margin-top: 2rem; background: rgba(0, 50, 0, 0.3);">
            <h3>ğŸ’° ESTIMATED MONTHLY COST</h3>
            <table style="width: 100%; margin-top: 1rem;">
                <tr>
                    <td>EC2 t3.micro</td>
                    <td style="text-align: right;">~$7.50</td>
                </tr>
                <tr>
                    <td>Application Load Balancer</td>
                    <td style="text-align: right;">~$16.20</td>
                </tr>
                <tr>
                    <td>Cognito (< 50k MAU)</td>
                    <td style="text-align: right;">Free</td>
                </tr>
                <tr>
                    <td>Data Transfer</td>
                    <td style="text-align: right;">~$1.00</td>
                </tr>
                <tr style="border-top: 2px solid #00ff00;">
                    <td><strong>TOTAL</strong></td>
                    <td style="text-align: right;"><strong>~$25-30/month</strong></td>
                </tr>
            </table>
        </div>

        <div class="nav-links" style="margin-top: 3rem;">
            <a href="/">â† RETURN TO HOME</a>
        </div>
    </div>
</div>
{% endblock %}
