{% extends "base.html" %}

{% block title %}ACCOUNT SETTINGS - CAPSULE PORTAL{% endblock %}

{% block content %}
<div class="crt-container">
    <pre class="ascii-art">
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
 â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
 â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
 â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•      â•šâ•â•   â•šâ•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•
    </pre>

    <div class="content-box">
        <h2>ğŸ” ACCOUNT SETTINGS</h2>

        <p style="margin-bottom: 2rem;">Current User: <strong>{{ email }}</strong></p>

        <!-- MFA Configuration Section -->
        <div class="info-section">
            <h3>ğŸ›¡ï¸ MULTI-FACTOR AUTHENTICATION (MFA)</h3>

            <div style="background: rgba(0, 20, 0, 0.5); padding: 1.5rem; margin-top: 1rem; border-left: 3px solid #00ff00;">
                <p style="margin-bottom: 1rem;"><strong>Why MFA Matters:</strong></p>
                <p style="margin-bottom: 1rem;">MFA adds a second layer of security by requiring both your password AND a time-based code from your authenticator app. Even if someone steals your password, they cannot access your account without the second factor.</p>
            </div>

            <!-- TOTP Option -->
            <div style="background: rgba(0, 50, 0, 0.3); border: 2px solid #00ff00; padding: 1.5rem; margin-top: 2rem;">
                <h4 style="color: #00ff00; margin-bottom: 0.5rem;">
                    ğŸ” AUTHENTICATOR APP (TOTP)
                </h4>

                <div style="margin: 1rem 0;">
                    <p style="font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>How it works:</strong></p>
                    <ul style="margin-left: 2rem; margin-top: 0.5rem; font-size: 0.9rem;">
                        <li>Install an authenticator app (Google Authenticator, Authy, Microsoft Authenticator)</li>
                        <li>Scan a QR code during setup</li>
                        <li>App generates a new 6-digit code every 30 seconds</li>
                        <li>Enter the code when logging in</li>
                    </ul>
                </div>

                <div style="background: rgba(0, 100, 0, 0.3); padding: 1rem; margin: 1rem 0; border-left: 3px solid #00ff00;">
                    <p style="font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>âœ… Security Benefits:</strong></p>
                    <ul style="margin-left: 2rem; font-size: 0.85rem;">
                        <li><strong>Most Secure:</strong> Not vulnerable to SIM swapping attacks</li>
                        <li><strong>Works Offline:</strong> No cell signal or internet required</li>
                        <li><strong>Industry Standard:</strong> Used by banks, government, tech companies</li>
                        <li><strong>Free:</strong> No per-use costs</li>
                        <li><strong>Private:</strong> Codes generated on your device only</li>
                    </ul>
                </div>

                <a href="/mfa-setup" class="btn-primary" style="display: inline-block; margin-top: 1rem;">
                    ğŸ” SET UP AUTHENTICATOR APP
                </a>
            </div>
        </div>

        <!-- Password Change Section -->
        <div class="info-section" style="margin-top: 2rem;">
            <h3>ğŸ”‘ CHANGE PASSWORD</h3>

            <div style="background: rgba(0, 20, 0, 0.5); padding: 1.5rem; margin-top: 1rem; border-left: 3px solid #00ff00;">
                <p style="margin-bottom: 1rem;"><strong>Password Requirements:</strong></p>
                <ul style="margin-left: 2rem; font-size: 0.9rem;">
                    <li>Minimum 8 characters</li>
                    <li>At least one uppercase letter (A-Z)</li>
                    <li>At least one lowercase letter (a-z)</li>
                    <li>At least one number (0-9)</li>
                    <li>At least one special character (!@#$%^&*)</li>
                </ul>
            </div>

            <div class="warning-box" style="margin-top: 1.5rem;">
                <p style="margin-bottom: 1rem;"><strong>âš ï¸ Important:</strong></p>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;">
                    To change your password securely, you'll be logged out and sent a verification code via email.
                    This ensures only you can change your password.
                </p>
                <p style="font-size: 0.85rem; opacity: 0.8;">
                    <strong>What will happen - Step by step:</strong><br>
                    1. You'll be logged out immediately<br>
                    2. You'll see our custom password reset page (NOT the Cognito login page)<br>
                    3. Enter your email: <strong>{{ email }}</strong><br>
                    4. Check your email for a 6-digit verification code<br>
                    5. Enter the code on the password reset page<br>
                    6. Create your new password (meets all requirements)<br>
                    7. Click "LOGIN WITH NEW PASSWORD" on the success page<br>
                    8. You'll see the Cognito login page - enter your email and NEW password<br>
                    9. Click "Sign in" - you're back in the portal!
                </p>
                <div style="background: rgba(255, 200, 0, 0.1); border-left: 3px solid #ffc107; padding: 1rem; margin-top: 1rem;">
                    <p style="color: #ffc107; font-weight: bold; margin-bottom: 0.5rem;">ğŸ’¡ PRO TIP:</p>
                    <p style="font-size: 0.85rem; line-height: 1.6;">
                        After resetting, DO NOT click "Forgot your password?" on the Cognito login page.
                        Just enter your email and your NEW password directly and click "Sign in".
                    </p>
                </div>
            </div>

            <div style="margin-top: 1.5rem;">
                <a href="/logout-and-reset" class="btn-primary" style="display: inline-block;">
                    ğŸ”‘ CHANGE PASSWORD
                </a>
            </div>
        </div>

        <!-- Account Information -->
        <div class="info-section" style="margin-top: 2rem;">
            <h3>ğŸ‘¤ ACCOUNT INFORMATION</h3>

            <table style="width: 100%; margin-top: 1rem; font-size: 0.9rem;">
                <tr>
                    <td style="padding: 0.5rem; width: 30%;"><strong>Email:</strong></td>
                    <td style="padding: 0.5rem;">{{ email }}</td>
                </tr>
                <tr>
                    <td style="padding: 0.5rem;"><strong>Groups:</strong></td>
                    <td style="padding: 0.5rem;">
                        {% for group in groups %}
                        <span class="badge {% if group == 'admins' %}admin{% endif %}" style="font-size: 0.75rem; padding: 0.3rem 0.8rem;">{{ group }}</span>
                        {% endfor %}
                    </td>
                </tr>
            </table>
        </div>

        <!-- Security Best Practices -->
        <div class="info-section" style="margin-top: 2rem; background: rgba(0, 50, 50, 0.3);">
            <h3>ğŸ’¡ SECURITY BEST PRACTICES</h3>

            <ul style="margin-left: 2rem; margin-top: 1rem; font-size: 0.9rem; line-height: 1.8;">
                <li><strong>Enable MFA:</strong> Always use an authenticator app to protect your account</li>
                <li><strong>Strong Passwords:</strong> Use unique passwords for each service</li>
                <li><strong>Update Regularly:</strong> Change passwords periodically</li>
                <li><strong>Never Share:</strong> Don't share passwords or MFA codes with anyone</li>
                <li><strong>Backup Codes:</strong> Save your authenticator backup codes in a secure location</li>
            </ul>
        </div>

        <div class="nav-links" style="margin-top: 3rem;">
            <a href="/">â† RETURN TO HOME</a>
        </div>
    </div>
</div>
{% endblock %}
